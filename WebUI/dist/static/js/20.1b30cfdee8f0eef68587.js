webpackJsonp([20],{"157H":function(t,e,o){e=t.exports=o("FZ+f")(!0),e.push([t.i,".avatar{width:200px;height:280px;background:#fff;border-radius:2px}","",{version:3,sources:["E:/Bee/YumiButler.git/WebUI/src/app/Dicts/Form/index.vue"],names:[],mappings:"AACA,QACE,YAAa,AACb,aAAc,AACd,gBAAoB,AACpB,iBAAmB,CACpB",file:"index.vue",sourcesContent:["\n.avatar {\n  width: 200px;\n  height: 280px;\n  background: #ffffff;\n  border-radius: 2px;\n}\n"],sourceRoot:""}])},I7hq:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("NYxO"),i=o("ZA0d"),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={name:"form",created:function(){this.id=this.$route.params.id,this.id&&this.get(this.id)},data:function(){return{id:"",formValidate:{categoryName:"",commodityCategoryCode:"",commodityCost:.01,commodityImg:"",commodityName:"",commodityPrice:.01,commoditySynopsis:"",commodityUnit:""},ruleValidate:{commodityName:[{required:!0,message:"商品名称不能为空"},{max:20,message:"商品名称不能多于 20 个字"}],commodityPrice:[{required:!0,message:"库存不能为空"},{type:"number",min:.01,message:"进货价不能低于于0.00"}],commodityCost:[{required:!0,message:"库存不能为空"},{type:"number",min:.01,message:"售货价不能小于0.00"}],commodityUnit:[{required:!0,message:"单位不能为空"}]},uploadurl:r.default.API_URL+"/uploadFile/upload",updloadData:{fileName:"yumi-bee",upperFileName:"commodity-img",footFileName:"img"},loading:!1}},methods:{get:function(t){this.$store.dispatch("getCommodity",{uri:t})},handleSave:function(){var t=this;if(null==t.formValidate.commodityImg||""==t.formValidate.commodityImg)return void t.$Message.error({content:"请上传商品图片",duration:5,closable:!0});t.$refs.formValidate.validate(function(e){if(e){var o=t.id?"putCommodity":"postCommodity",a=t.id;t.$store.dispatch(o,{uri:a,data:t.formValidate}).then(function(){t.$Message.success((t.id?"编辑":"新增")+"成功！"),!t.id&&t.resetFields()})}})},resetFields:function(){this.$refs.formValidate.resetFields()},uploadSuccess:function(t,e){t.success&&(this.$set(this.formValidate,"commodityImg","http://yumi-bee.oss-cn-shenzhen.aliyuncs.com/"+t.data),this.loading=!1)},uploadProgress:function(){this.loading=!0},uploadError:function(){this.$Message.error({content:"上传图片失败，请重试",duration:5,closable:!0}),this.loading=!1}},computed:(0,a.mapState)(["dict","commodity","dicttype"]),watch:{"dict.dict":{handler:function(t){this.$set(this,"formValidate",t.data);var e=this;e.dicttype.alldicttypes.forEach(function(t,o){if(e.formValidate.categoryCode&&t.categoryCode==e.formValidate.categoryCode){var a=e.formValidate;a.typeName=t.typeName,e.$set(e,"formValidate",a)}})}}}}},MYwl:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Breadcrumb",{staticStyle:{display:"flex","padding-bottom":"20px"}},[o("Breadcrumb-item",{attrs:{href:"/"}},[t._v("首页")]),t._v(" "),o("Breadcrumb-item",{attrs:{href:"#"}},[t._v("商品")]),t._v(" "),o("Breadcrumb-item",{attrs:{href:"/dicts"}},[t._v("商品列表")]),t._v(" "),o("Breadcrumb-item",[t._v("商品"+t._s(t.id?"编辑":"新增"))])],1),t._v(" "),o("div",[o("Row",[o("Col",{attrs:{span:"12"}},[o("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":120}},[o("FormItem",{attrs:{label:"商品类型",prop:"categoryCode"}},[t.id?o("Input",{attrs:{disabled:""},model:{value:t.formValidate.commodityCategoryCode,callback:function(e){t.formValidate.commodityCategoryCode=e},expression:"formValidate.commodityCategoryCode"}}):t._e(),t._v(" "),t.id?t._e():o("Select",{attrs:{placeholder:"请选择字典类型",filterable:""},model:{value:t.formValidate.commodityCategoryCode,callback:function(e){t.formValidate.commodityCategoryCode=e},expression:"formValidate.commodityCategoryCode"}},[o("Option",{attrs:{value:""}},[t._v("所有类型")]),t._v(" "),t._l(t.dicttype.alldicttypes,function(e){return o("Option",{key:e.categoryCode,attrs:{value:e.categoryCode}},[t._v(t._s(e.categoryName))])})],2)],1),t._v(" "),o("FormItem",{attrs:{label:"商品名称",prop:"commodityName"}},[o("Input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.formValidate.commodityName,callback:function(e){t.formValidate.commodityName=e},expression:"formValidate.commodityName"}})],1),t._v(" "),o("FormItem",{attrs:{label:"商品概要",prop:"commoditySynopsis"}},[o("Input",{attrs:{placeholder:"请输入商品概要"},model:{value:t.formValidate.commoditySynopsis,callback:function(e){t.formValidate.commoditySynopsis=e},expression:"formValidate.commoditySynopsis"}})],1),t._v(" "),o("FormItem",{attrs:{label:"单位",prop:"commodityUnit"}},[o("Input",{attrs:{placeholder:"请输入商品单位，如：台"},model:{value:t.formValidate.commodityUnit,callback:function(e){t.formValidate.commodityUnit=e},expression:"formValidate.commodityUnit"}})],1),t._v(" "),o("FormItem",{attrs:{label:"商品进货价",prop:"commodityCost"}},[o("Row",[o("Col",{attrs:{span:"6"}},[o("InputNumber",{attrs:{min:.01,formatter:function(t){return("$ "+t).replace(/B(?=(d{3})+(?!d))/g,",")},parser:function(t){return t.replace(/$s?|(,*)/g,"")}},model:{value:t.formValidate.commodityCost,callback:function(e){t.formValidate.commodityCost=e},expression:"formValidate.commodityCost"}})],1),t._v(" "),o("Col",{attrs:{span:"2"}},[t._v("\n                元\n              ")])],1)],1),t._v(" "),o("FormItem",{attrs:{label:"商品售货价",prop:"commodityPrice"}},[o("Row",[o("Col",{attrs:{span:"6"}},[o("InputNumber",{attrs:{min:.01,formatter:function(t){return("$ "+t).replace(/B(?=(d{3})+(?!d))/g,",")},parser:function(t){return t.replace(/$s?|(,*)/g,"")}},model:{value:t.formValidate.commodityPrice,callback:function(e){t.formValidate.commodityPrice=e},expression:"formValidate.commodityPrice"}})],1),t._v(" "),o("Col",{attrs:{span:"2"}},[t._v("\n                元\n              ")])],1)],1),t._v(" "),o("Form-item",[o("Button",{staticClass:"margin-right-sm",attrs:{type:"primary",loading:t.loading},on:{click:t.handleSave}},[t.loading?o("span",[t._v("上传中...")]):o("span",[t._v("保存")])]),t._v(" "),o("Button",{attrs:{type:"ghost"},on:{click:function(e){t.$router.back(-1)}}},[t._v("返回")])],1)],1)],1),t._v(" "),o("Col",{attrs:{span:"12"}},[o("img",{staticClass:"avatar",attrs:{src:t.formValidate.commodityImg}}),t._v(" "),o("Upload",{attrs:{action:t.uploadurl,accept:"image/*",name:"file",data:t.updloadData,"max-size":10240,"on-success":t.uploadSuccess,"on-progress":t.uploadProgress,"on-error":t.uploadError,"show-upload-list":!1}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("上传商品图片")])],1)],1)],1)],1)],1)},i=[],r={render:a,staticRenderFns:i};e.a=r},RAYJ:function(t,e,o){var a=o("157H");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("rjj0")("4dc15b3a",a,!0)},seTV:function(t,e,o){"use strict";function a(t){o("RAYJ")}Object.defineProperty(e,"__esModule",{value:!0});var i=o("I7hq"),r=o.n(i),m=o("MYwl"),d=o("VU/8"),s=a,l=d(r.a,m.a,s,null,null);e.default=l.exports}});
//# sourceMappingURL=20.1b30cfdee8f0eef68587.js.map