<import src="/zanui/tab/index.wxml" />

<view>
  <view style="margin: 0px 0">
    <template
      is="zan-tab"
      data="{{ ...tab1, componentId: 'tab1' }}"></template>
  </view>
  <view style="width:100%;height:{{height-50}}px;filter: opacity(30%);text-align: center;margin-top: 280rpx;" wx:if="{{orderList.length == 0}}">
    <view>
      <view>
        <image style='width:280rpx;height:280rpx' src='../../images/hpdNoData.png'></image>
      </view>
      <view style='color:#707070'>
        暂无数据
      </view>
    </view>
    
  </view>
  <view style='' wx:if="{{orderList.length > 0}}">
    <scroll-view scroll-y style="width:100%;height:{{height-50}}px" bindscrolltolower="lower" bindscroll="scroll">
      <view wx:for="{{orderList}}" wx:for-item="itemName" wx:for-index="index" wx:key="" style='width:100%;background-color: #fff;box-shadow: 2rpx 2rpx 20rpx #bfbfbf;margin-top:15rpx'>
        <view style='display: flex'>
          <view style='width: 100%;'>
            <view style='width:100%;height:40rpx;font-size:24rpx;border-bottom: 2rpx solid #e8e8e8;align-items: center;display: flex;justify-content:space-between;'>
              <view style='display:flex;margin-left: 10rpx;'>{{itemName.hotelName}}</view>
              <view style='margin-right:10rpx'>{{itemName.orderCreatetime}}</view>
            </view>
            <view style='display:flex;justify-content:space-between;'>
              <view style='width:100%'>

                <view style='width:100%'>
                    <view wx:for="{{itemName.sOrderDetails}}" wx:for-index="index" wx:key="item">
                      <view class="zan-panel" style='background:#f3f3f1'>
                        <view class="zan-card">
                          <view class="zan-card__thumb">
                            <image class="zan-card__img"
                              src="{{item.commodityImg}}"
                              mode="aspectFit"
                            ></image>
                          </view>
                          <view class="zan-card__detail">
                            <view class="zan-card__detail-row">
                              <view class="zan-card__right-col">¥ {{item.commoditySumPrice}}</view>
                              <view class="zan-card__left-col zan-ellipsis--l2">
                                <view>{{item.orderNumber}}</view>
                                <view>{{item.categoryName}}-{{item.commodityName}}</view>
                              </view>
                            </view>

                            <view class="zan-card__detail-row zan-c-gray-darker">
                              <view class="zan-card__right-col">x{{item.commodityAmount}}</view>
                              <view class="zan-card__left-col">
                                单价：{{item.commodityPrice}}
                              </view>
                            </view>
                            <view class="zan-card__detail-row zan-c-gray-darker">
                              <view class="zan-card__left-col zan-c-red">{{itemName.orderStatus === 0 ? '已支付' : itemName.orderStatus === 1 ? '配送中' : itemName.orderStatus === 2 ? '待确认' : itemName.orderStatus === 3 ? '已完成' : ''}}</view>
                            </view>
                          </view>
                        </view>
                      </view>
                    </view>
                </view>

              </view>
            </view>
          </view>
        </view>
        <view style="height: 50rpx;display: flex;align-items: center;justify-content: flex-end;margin-right: 10rpx;">
          <view style="font-size: 24rpx;margin-right: 20rpx;">共{{itemName.orderCountNumber}}件商品</view>
          <view style="font-size: 24rpx;">合计：{{itemName.orderSumPrice}}元</view>
        </view>
        <view wx:if="{{itemName.orderStatus === 2}}" style='height:68rpx;display:flex;justify-content:end;background-color: #fff;border-top:2rpx solid #e8e8e8;align-items: center;'>
          <button data-orderNo='{{item.orderNumber}}' bindtap='notarize' style='margin-right:10rpx' class="zan-btn zan-btn--small zan-btn--danger zan-btn--plain">确认送达</button>
        </view>

      </view>
    </scroll-view>
  </view>
</view>